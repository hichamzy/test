{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/user/Desktop/ecom-control-jee-main/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./../services/customer.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"../services/security.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nfunction CustomersComponent_nav_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"nav\", 4)(1, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function CustomersComponent_nav_1_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.handleNewCustomer());\n    });\n    i0.ɵɵtext(2, \" New customer \");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction CustomersComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r2.errorMessage);\n  }\n}\nfunction CustomersComponent_div_4_form_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 16);\n    i0.ɵɵlistener(\"ngSubmit\", function CustomersComponent_div_4_form_4_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.handleSearchPageCustomersByKeyword());\n    });\n    i0.ɵɵelementStart(1, \"div\", 17)(2, \"label\", 18);\n    i0.ɵɵtext(3, \"Keyword\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"input\", 19);\n    i0.ɵɵelementStart(5, \"button\", 20);\n    i0.ɵɵelement(6, \"i\", 21);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"formGroup\", ctx_r6.searchFormGroup);\n  }\n}\nfunction CustomersComponent_div_4_th_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"th\", 22);\n  }\n}\nfunction CustomersComponent_div_4_tr_18_td_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\")(1, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function CustomersComponent_div_4_tr_18_td_10_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const p_r12 = i0.ɵɵnextContext().$implicit;\n      const ctx_r15 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r15.handleEditCustomer(p_r12));\n    });\n    i0.ɵɵelement(2, \"i\", 27);\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction CustomersComponent_div_4_tr_18_td_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\")(1, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function CustomersComponent_div_4_tr_18_td_11_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const p_r12 = i0.ɵɵnextContext().$implicit;\n      const ctx_r18 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r18.handleDeleteCustomer(p_r12));\n    });\n    i0.ɵɵelement(2, \"i\", 29);\n    i0.ɵɵelementEnd()();\n  }\n}\nconst _c0 = function () {\n  return [\"ADMIN\"];\n};\nfunction CustomersComponent_div_4_tr_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\")(8, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function CustomersComponent_div_4_tr_18_Template_button_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r22);\n      const p_r12 = restoredCtx.$implicit;\n      const ctx_r21 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r21.handleCustomerBills(p_r12.id));\n    });\n    i0.ɵɵelement(9, \"i\", 24);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(10, CustomersComponent_div_4_tr_18_td_10_Template, 3, 0, \"td\", 25);\n    i0.ɵɵtemplate(11, CustomersComponent_div_4_tr_18_td_11_Template, 3, 0, \"td\", 25);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const p_r12 = ctx.$implicit;\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r12.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r12.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r12.email);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.authService.hasRoleIn(i0.ɵɵpureFunction0(5, _c0)));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.authService.hasRoleIn(i0.ɵɵpureFunction0(6, _c0)));\n  }\n}\nfunction CustomersComponent_div_4_li_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r26 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 30);\n    i0.ɵɵlistener(\"click\", function CustomersComponent_div_4_li_24_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r26);\n      const i_r24 = restoredCtx.index;\n      const ctx_r25 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r25.handleGetPageCustomer(ctx_r25.searchFormGroup.value.keyword, i_r24, ctx_r25.pageSize));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r24 = ctx.index;\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", i_r24 === ctx_r9.currentPage ? \"btn-info\" : \"btn-outline-info\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i_r24 + 1, \" \");\n  }\n}\nconst _c1 = function () {\n  return [];\n};\nfunction CustomersComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"div\", 8);\n    i0.ɵɵtext(2, \"Customers List\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 9);\n    i0.ɵɵtemplate(4, CustomersComponent_div_4_form_4_Template, 7, 1, \"form\", 10);\n    i0.ɵɵelementStart(5, \"table\", 11)(6, \"thead\")(7, \"tr\")(8, \"th\");\n    i0.ɵɵtext(9, \"ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"Customer name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13, \"Customer email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\");\n    i0.ɵɵtext(15, \"Bills\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(16, CustomersComponent_div_4_th_16_Template, 1, 0, \"th\", 12);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"tbody\");\n    i0.ɵɵtemplate(18, CustomersComponent_div_4_tr_18_Template, 12, 7, \"tr\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"div\", 0);\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"div\", 0);\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(23, \"ul\", 14);\n    i0.ɵɵtemplate(24, CustomersComponent_div_4_li_24_Template, 2, 2, \"li\", 15);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.searchFormGroup);\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.authService.hasRoleIn(i0.ɵɵpureFunction0(7, _c0)));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.customers);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r3.currentPage + 1, \" / \", ctx_r3.totalPages, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r3.pageSize, \" per page\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(8, _c1).constructor(ctx_r3.totalPages));\n  }\n}\nconst _c2 = function () {\n  return [\"USER\"];\n};\nexport class CustomersComponent {\n  constructor(customerService, formBuilder, authService, router) {\n    this.customerService = customerService;\n    this.formBuilder = formBuilder;\n    this.authService = authService;\n    this.router = router;\n    this.currentPage = 0;\n    this.pageSize = 5;\n    this.totalPages = 0;\n    this.totalElements = 0;\n    this.roundNumber = value => {\n      return Math.round(value);\n    };\n    this.handleGetPageCustomer = (keyword, page, size) => {\n      this.customerService.getPageCustomersByKeyword(keyword, page, size).subscribe({\n        next: data => {\n          this.customers = data._embedded.customers;\n          this.currentPage = data.page.number;\n          this.pageSize = data.page.size;\n          this.totalPages = data.page.totalPages;\n          this.totalElements = data.page.totalElements;\n        },\n        error: error => this.errorMessage = error.message\n      });\n    };\n    this.handleSearchPageCustomersByKeyword = () => {\n      this.currentPage = 0;\n      this.customerService.getPageCustomersByKeyword(this.searchFormGroup.value.keyword, this.currentPage, this.pageSize).subscribe({\n        next: data => {\n          let {\n            customers\n          } = data._embedded;\n          let {\n            number,\n            totalElements,\n            totalPages,\n            size\n          } = data.page;\n          this.customers = customers;\n          this.currentPage = number;\n          this.pageSize = size;\n          this.totalPages = totalPages;\n          this.totalElements = totalElements;\n        },\n        error: error => {\n          this.errorMessage = error.message;\n        }\n      });\n    };\n    this.handleCustomerBills = customerID => {\n      this.router.navigateByUrl(`/user/customer-bills/${customerID}`);\n      //this.customerService.getCustomerBills(customerID);\n    };\n  }\n\n  ngOnInit() {\n    this.searchFormGroup = this.formBuilder.group({\n      keyword: this.formBuilder.control(\"\")\n    });\n    this.handleGetPageCustomer(\"\", this.currentPage, this.pageSize);\n  }\n  handleDeleteCustomer(customer) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      if (confirm(\"Are you sure you want to delete this customer\")) {\n        _this.customerService.deleteCustomer(customer.id).subscribe(d => {\n          _this.customerService.getPageCustomersByKeyword().subscribe({\n            next: data => {\n              _this.customers = data._embedded.customers;\n              _this.currentPage = data.page.number;\n              _this.pageSize = data.page.size;\n              _this.totalPages = data.page.totalPages;\n              _this.totalElements = data.page.totalElements;\n            },\n            error: error => _this.errorMessage = error.message\n          });\n        });\n      }\n    })();\n  }\n  handleNewCustomer() {\n    this.router.navigateByUrl(\"/user/new-customer\");\n  }\n  handleEditCustomer(customer) {\n    this.router.navigateByUrl(`/admin/edit-customer/${customer.id}`);\n  }\n  static #_ = this.ɵfac = function CustomersComponent_Factory(t) {\n    return new (t || CustomersComponent)(i0.ɵɵdirectiveInject(i1.CustomerService), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.SecurityService), i0.ɵɵdirectiveInject(i4.Router));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CustomersComponent,\n    selectors: [[\"app-customers\"]],\n    decls: 5,\n    vars: 4,\n    consts: [[1, \"container\"], [\"class\", \"p-2 m-2 border border-info\", 4, \"ngIf\"], [\"errors\", \"\"], [\"class\", \"card\", 4, \"ngIf\", \"ngIfElse\"], [1, \"p-2\", \"m-2\", \"border\", \"border-info\"], [1, \"btn\", \"btn-outline-info\", 3, \"click\"], [1, \"text-danger\"], [1, \"card\"], [1, \"card-header\"], [1, \"card-body\"], [\"class\", \"form\", 3, \"formGroup\", \"ngSubmit\", 4, \"ngIf\"], [1, \"table\"], [\"colspan\", \"2\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [1, \"nav\", \"nav-pills\"], [\"class\", \"btn ms-1 mt-1\", 3, \"ngClass\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"form\", 3, \"formGroup\", \"ngSubmit\"], [1, \"input-group\"], [1, \"input-group-text\"], [\"type\", \"text\", \"formControlName\", \"keyword\", 1, \"form-control\"], [1, \"btn\", \"btn-info\"], [1, \"bi\", \"bi-search\"], [\"colspan\", \"2\"], [1, \"btn\", \"btn-outline-dark\", 3, \"click\"], [1, \"bi\", \"bi-currency-dollar\"], [4, \"ngIf\"], [1, \"btn\", \"btn-warning\", 3, \"click\"], [1, \"bi\", \"bi-pencil\"], [1, \"btn\", \"btn-danger\", 3, \"click\"], [1, \"bi\", \"bi-trash\"], [1, \"btn\", \"ms-1\", \"mt-1\", 3, \"ngClass\", \"click\"]],\n    template: function CustomersComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, CustomersComponent_nav_1_Template, 3, 0, \"nav\", 1);\n        i0.ɵɵtemplate(2, CustomersComponent_ng_template_2_Template, 2, 1, \"ng-template\", null, 2, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵtemplate(4, CustomersComponent_div_4_Template, 25, 9, \"div\", 3);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(3);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.authService.hasRoleIn(i0.ɵɵpureFunction0(3, _c2)));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.customers)(\"ngIfElse\", _r1);\n      }\n    },\n    dependencies: [i5.NgClass, i5.NgForOf, i5.NgIf, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName],\n    styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["i0","CustomersComponent","constructor","customerService","formBuilder","authService","router","value","Math","round","keyword","page","size","getPageCustomersByKeyword","subscribe","next","data","customers","_embedded","currentPage","number","pageSize","totalPages","totalElements","error","errorMessage","message","searchFormGroup","customerID","navigateByUrl","ngOnInit","group","control","handleGetPageCustomer","handleDeleteCustomer","customer","confirm","deleteCustomer","id","d","handleNewCustomer","handleEditCustomer","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\user\\Desktop\\ecom-control-jee-main\\front\\src\\app\\customers\\customers.component.html","C:\\Users\\user\\Desktop\\ecom-control-jee-main\\front\\src\\app\\customers\\customers.component.ts"],"sourcesContent":["<div class=\"container\">\n  <nav\n    class=\"p-2 m-2 border border-info\"\n    *ngIf=\"authService.hasRoleIn(['USER'])\"\n  >\n    <button class=\"btn btn-outline-info\" (click)=\"handleNewCustomer()\">\n      New customer\n    </button>\n  </nav>\n  <ng-template #errors>\n    <div class=\"text-danger\">{{ errorMessage }}</div>\n  </ng-template>\n  <div class=\"card\" *ngIf=\"customers; else errors\">\n    <div class=\"card-header\">Customers List</div>\n    <div class=\"card-body\">\n      <form\n        class=\"form\"\n        *ngIf=\"searchFormGroup\"\n        [formGroup]=\"searchFormGroup\"\n        (ngSubmit)=\"handleSearchPageCustomersByKeyword()\"\n      >\n        <div class=\"input-group\">\n          <label class=\"input-group-text\">Keyword</label>\n          <input type=\"text\" class=\"form-control\" formControlName=\"keyword\" />\n          <button class=\"btn btn-info\">\n            <i class=\"bi bi-search\"></i>\n          </button>\n        </div>\n      </form>\n      <table class=\"table\">\n        <thead>\n          <tr>\n            <th>ID</th>\n            <th>Customer name</th>\n            <th>Customer email</th>\n\n            <th>Bills</th>\n            <th *ngIf=\"authService.hasRoleIn(['ADMIN'])\" colspan=\"2\"></th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let p of customers\">\n            <td>{{ p.id }}</td>\n            <td>{{ p.name }}</td>\n            <td>{{ p.email }}</td>\n            <td>\n              <button\n                (click)=\"handleCustomerBills(p.id)\"\n                class=\"btn btn-outline-dark\"\n              >\n                <i class=\"bi bi-currency-dollar\"></i>\n              </button>\n            </td>\n            <td *ngIf=\"authService.hasRoleIn(['ADMIN'])\">\n              <button (click)=\"handleEditCustomer(p)\" class=\"btn btn-warning\">\n                <i class=\"bi bi-pencil\"></i>\n              </button>\n            </td>\n            <td *ngIf=\"authService.hasRoleIn(['ADMIN'])\">\n              <button (click)=\"handleDeleteCustomer(p)\" class=\"btn btn-danger\">\n                <i class=\"bi bi-trash\"></i>\n              </button>\n            </td>\n          </tr>\n        </tbody>\n        <div class=\"container\">{{ currentPage + 1 }} / {{ totalPages }}</div>\n        <div class=\"container\">{{ pageSize }} per page</div>\n      </table>\n      <ul class=\"nav nav-pills\">\n        <li\n          class=\"btn ms-1 mt-1\"\n          (click)=\"\n            handleGetPageCustomer(searchFormGroup.value.keyword, i, pageSize)\n          \"\n          *ngFor=\"let item of [].constructor(this.totalPages); let i = index\"\n          [ngClass]=\"i === currentPage ? 'btn-info' : 'btn-outline-info'\"\n        >\n          {{ i + 1 }}\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>\n","import { Customer, PageCustomer } from \"./../model/customer.model\";\n\nimport { CustomerService } from \"./../services/customer.service\";\nimport { Component, OnInit } from \"@angular/core\";\nimport { FormBuilder, FormGroup } from \"@angular/forms\";\nimport { Router } from \"@angular/router\";\nimport { SecurityService } from \"../services/security.service\";\n\n@Component({\n  selector: \"app-customers\",\n  templateUrl: \"./customers.component.html\",\n  styleUrls: [\"./customers.component.scss\"],\n})\nexport class CustomersComponent implements OnInit {\n  customers!: Array<Customer>;\n  errorMessage!: String;\n  searchFormGroup!: FormGroup;\n  currentPage: number = 0;\n  pageSize: number = 5;\n  totalPages: number = 0;\n  totalElements: number = 0;\n  constructor(\n    private customerService: CustomerService,\n    private formBuilder: FormBuilder,\n    public authService: SecurityService,\n    private router: Router\n  ) {}\n\n  ngOnInit(): void {\n    this.searchFormGroup = this.formBuilder.group({\n      keyword: this.formBuilder.control(\"\"),\n    });\n    this.handleGetPageCustomer(\"\", this.currentPage, this.pageSize);\n  }\n\n  async handleDeleteCustomer(customer: Customer) {\n    if (confirm(\"Are you sure you want to delete this customer\")) {\n      this.customerService.deleteCustomer(customer.id).subscribe((d) => {\n        this.customerService.getPageCustomersByKeyword().subscribe({\n          next: (data) => {\n            this.customers = data._embedded.customers;\n            this.currentPage = data.page.number;\n            this.pageSize = data.page.size;\n            this.totalPages = data.page.totalPages;\n            this.totalElements = data.page.totalElements;\n          },\n          error: (error) => (this.errorMessage = error.message),\n        });\n      });\n    }\n  }\n  roundNumber = (value: number) => {\n    return Math.round(value);\n  };\n\n  handleGetPageCustomer = (keyword: string, page: number, size: number) => {\n    this.customerService\n      .getPageCustomersByKeyword(keyword, page, size)\n      .subscribe({\n        next: (data) => {\n          this.customers = data._embedded.customers;\n          this.currentPage = data.page.number;\n          this.pageSize = data.page.size;\n          this.totalPages = data.page.totalPages;\n          this.totalElements = data.page.totalElements;\n        },\n        error: (error) => (this.errorMessage = error.message),\n      });\n  };\n  handleSearchPageCustomersByKeyword = () => {\n    this.currentPage = 0;\n    this.customerService\n      .getPageCustomersByKeyword(\n        this.searchFormGroup.value.keyword,\n        this.currentPage,\n        this.pageSize\n      )\n      .subscribe({\n        next: (data: PageCustomer) => {\n          let { customers } = data._embedded;\n          let { number, totalElements, totalPages, size } = data.page;\n          this.customers = customers;\n          this.currentPage = number;\n          this.pageSize = size;\n          this.totalPages = totalPages;\n          this.totalElements = totalElements;\n        },\n        error: (error) => {\n          this.errorMessage = error.message;\n        },\n      });\n  };\n  handleNewCustomer() {\n    this.router.navigateByUrl(\"/user/new-customer\");\n  }\n  handleEditCustomer(customer: Customer) {\n    this.router.navigateByUrl(`/admin/edit-customer/${customer.id}`);\n  }\n\n  handleCustomerBills = (customerID: number) => {\n    this.router.navigateByUrl(`/user/customer-bills/${customerID}`);\n    //this.customerService.getCustomerBills(customerID);\n  };\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}