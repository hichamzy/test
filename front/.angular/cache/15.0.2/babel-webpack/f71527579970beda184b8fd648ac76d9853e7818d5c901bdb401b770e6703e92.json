{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"./bill.service\";\nexport class CustomerService {\n  constructor(httpClient, router, billService) {\n    this.httpClient = httpClient;\n    this.router = router;\n    this.billService = billService;\n    this.lastKeyword = \"\";\n    this.lastPageSize = 5;\n    this.lastPageNumber = 0;\n    this.BaseURI = \"http://localhost:8888/CUSTOMER-SERVICE/customers\";\n  }\n  ngOnInit() {}\n  deleteCustomer(customerID) {\n    return this.httpClient.delete(`${this.BaseURI}/${customerID}`);\n  }\n  addCustomer(name, email) {\n    return this.httpClient.post(`${this.BaseURI}`, {\n      name: name,\n      email: email\n    });\n  }\n  editCustomer(id, name, email) {\n    return this.httpClient.put(`${this.BaseURI}/${id}`, {\n      name: name,\n      email: email\n    });\n  }\n  getPageCustomersByKeyword(keyword = this.lastKeyword, page = this.lastPageNumber, size = this.lastPageSize) {\n    this.lastPageNumber = page;\n    this.lastPageSize = size;\n    this.lastKeyword = keyword;\n    return this.httpClient.get(`${this.BaseURI}/search/keyword?name=${keyword}&email=${keyword}&page=${page}&size=${size}`);\n  }\n  getCustomerById(id) {\n    return this.httpClient.get(`${this.BaseURI}/${id}`);\n  }\n  getCustomerBills(id) {\n    this.router.navigateByUrl(\"/customer/bills\");\n    this.billService.getBillsByCustomerId(id);\n  }\n  static #_ = this.ɵfac = function CustomerService_Factory(t) {\n    return new (t || CustomerService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.Router), i0.ɵɵinject(i3.BillService));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: CustomerService,\n    factory: CustomerService.ɵfac,\n    providedIn: \"root\"\n  });\n}","map":{"version":3,"mappings":";;;;AAYA,OAAM,MAAOA,eAAe;EAM1BC,YACUC,UAAsB,EACtBC,MAAc,EACdC,WAAwB;IAFxB,eAAU,GAAVF,UAAU;IACV,WAAM,GAANC,MAAM;IACN,gBAAW,GAAXC,WAAW;IARb,gBAAW,GAAW,EAAE;IACxB,iBAAY,GAAW,CAAC;IACxB,mBAAc,GAAW,CAAC;IAE1B,YAAO,GAAG,kDAAkD;EAKjE;EACHC,QAAQ,IAAU;EAEXC,cAAc,CAACC,UAAkB;IACtC,OAAO,IAAI,CAACL,UAAU,CAACM,MAAM,CAAO,GAAG,IAAI,CAACC,OAAO,IAAIF,UAAU,EAAE,CAAC;EACtE;EAEOG,WAAW,CAACC,IAAY,EAAEC,KAAa;IAC5C,OAAO,IAAI,CAACV,UAAU,CAACW,IAAI,CAAW,GAAG,IAAI,CAACJ,OAAO,EAAE,EAAE;MACvDE,IAAI,EAAEA,IAAI;MACVC,KAAK,EAAEA;KACR,CAAC;EACJ;EAEOE,YAAY,CACjBC,EAAU,EACVJ,IAAY,EACZC,KAAa;IAEb,OAAO,IAAI,CAACV,UAAU,CAACc,GAAG,CAAW,GAAG,IAAI,CAACP,OAAO,IAAIM,EAAE,EAAE,EAAE;MAC5DJ,IAAI,EAAEA,IAAI;MACVC,KAAK,EAAEA;KACR,CAAC;EACJ;EAEOK,yBAAyB,CAC9BC,UAAkB,IAAI,CAACC,WAAW,EAClCC,OAAe,IAAI,CAACC,cAAc,EAClCC,OAAe,IAAI,CAACC,YAAY;IAEhC,IAAI,CAACF,cAAc,GAAGD,IAAI;IAC1B,IAAI,CAACG,YAAY,GAAGD,IAAI;IACxB,IAAI,CAACH,WAAW,GAAGD,OAAO;IAC1B,OAAO,IAAI,CAAChB,UAAU,CAACsB,GAAG,CACxB,GAAG,IAAI,CAACf,OAAO,wBAAwBS,OAAO,UAAUA,OAAO,SAASE,IAAI,SAASE,IAAI,EAAE,CAC5F;EACH;EAEOG,eAAe,CAACV,EAAU;IAC/B,OAAO,IAAI,CAACb,UAAU,CAACsB,GAAG,CAAW,GAAG,IAAI,CAACf,OAAO,IAAIM,EAAE,EAAE,CAAC;EAC/D;EAEOW,gBAAgB,CAACX,EAAU;IAChC,IAAI,CAACZ,MAAM,CAACwB,aAAa,CAAC,iBAAiB,CAAC;IAC5C,IAAI,CAACvB,WAAW,CAACwB,oBAAoB,CAACb,EAAE,CAAC;EAC3C;EAAC;qBAvDUf,eAAe;EAAA;EAAA;WAAfA,eAAe;IAAA6B,SAAf7B,eAAe;IAAA8B,YAFd;EAAM","names":["CustomerService","constructor","httpClient","router","billService","ngOnInit","deleteCustomer","customerID","delete","BaseURI","addCustomer","name","email","post","editCustomer","id","put","getPageCustomersByKeyword","keyword","lastKeyword","page","lastPageNumber","size","lastPageSize","get","getCustomerById","getCustomerBills","navigateByUrl","getBillsByCustomerId","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\user\\Desktop\\ecom-control-jee-main\\front\\src\\app\\services\\customer.service.ts"],"sourcesContent":["import { Router } from \"@angular/router\";\nimport { BillService } from \"./bill.service\";\nimport { PageBill } from \"./../model/bill.model\";\nimport { Customer, PageCustomer } from \"./../model/customer.model\";\nimport { Injectable, OnInit } from \"@angular/core\";\nimport { Observable, of, throwError } from \"rxjs\";\nimport { UUID } from \"angular2-uuid\";\nimport { HttpClient } from \"@angular/common/http\";\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class CustomerService implements OnInit {\n  private lastKeyword: string = \"\";\n  private lastPageSize: number = 5;\n  private lastPageNumber: number = 0;\n  private customers!: Array<Customer>;\n  private BaseURI = \"http://localhost:8888/CUSTOMER-SERVICE/customers\";\n  constructor(\n    private httpClient: HttpClient,\n    private router: Router,\n    private billService: BillService\n  ) {}\n  ngOnInit(): void {}\n\n  public deleteCustomer(customerID: number): Observable<void> {\n    return this.httpClient.delete<void>(`${this.BaseURI}/${customerID}`);\n  }\n\n  public addCustomer(name: string, email: string): Observable<Customer> {\n    return this.httpClient.post<Customer>(`${this.BaseURI}`, {\n      name: name,\n      email: email,\n    });\n  }\n\n  public editCustomer(\n    id: number,\n    name: string,\n    email: string\n  ): Observable<Customer> {\n    return this.httpClient.put<Customer>(`${this.BaseURI}/${id}`, {\n      name: name,\n      email: email,\n    });\n  }\n\n  public getPageCustomersByKeyword(\n    keyword: string = this.lastKeyword,\n    page: number = this.lastPageNumber,\n    size: number = this.lastPageSize\n  ): Observable<PageCustomer> {\n    this.lastPageNumber = page;\n    this.lastPageSize = size;\n    this.lastKeyword = keyword;\n    return this.httpClient.get<PageCustomer>(\n      `${this.BaseURI}/search/keyword?name=${keyword}&email=${keyword}&page=${page}&size=${size}`\n    );\n  }\n\n  public getCustomerById(id: number): Observable<Customer> {\n    return this.httpClient.get<Customer>(`${this.BaseURI}/${id}`);\n  }\n\n  public getCustomerBills(id: number): void {\n    this.router.navigateByUrl(\"/customer/bills\");\n    this.billService.getBillsByCustomerId(id);\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}